import{Q as i}from"./QInput.1ffec7f9.js";import{_ as p,r as m,B as c,J as f,E as l,D as g,V as d,O as u}from"./index.ebab3077.js";import{Q as y}from"./QForm.4d4f0ba4.js";import{u as w}from"./use-quasar.9a32f925.js";import"./focus-manager.3d77c9c9.js";const b={setup(){const r=w(),o=m(null),n=m(null);return{email:o,password:n,async onSubmit(){const e=new FormData;e.append("email",o.value),e.append("password",n.value);try{const s=await fetch("https://api.caronon.com/api/user/login",{method:"POST",body:e}),t=await s.json();s.ok?(r.notify({message:`Login successful. Name: ${t.name}, Id: ${t.id}. Redirecting...`,type:"positive"}),localStorage.setItem("jwtToken",t.token),localStorage.setItem("fileToken",t.fileToken),setTimeout(()=>{var a;document.location.href=(a=new URL(location.href).searchParams.get("redirect"))!=null?a:"/"},3e3)):r.notify({message:t.message,type:"negative"})}catch(s){r.notify({message:s,type:"negative"})}},onReset(){o.value=null,n.value=null}}}},h={class:"q-pa-md"},_=d("h4",{class:"text-primary"},"Login",-1);function v(r,o,n,e,s,t){return c(),f("div",h,[_,l(y,{onSubmit:e.onSubmit,onReset:e.onReset,class:"q-gutter-md"},{default:g(()=>[l(i,{filled:"",modelValue:e.email,"onUpdate:modelValue":o[0]||(o[0]=a=>e.email=a),label:"Your email *","lazy-rules":"",rules:[a=>a&&a.length>0||"Please type something"]},null,8,["modelValue","rules"]),l(i,{filled:"",type:"password",modelValue:e.password,"onUpdate:modelValue":o[1]||(o[1]=a=>e.password=a),label:"Your password *","lazy-rules":""},null,8,["modelValue"]),d("div",null,[l(u,{label:"Submit",type:"submit",color:"primary"}),l(u,{label:"Reset",type:"reset",color:"primary",flat:"",class:"q-ml-sm"})])]),_:1},8,["onSubmit","onReset"])])}var x=p(b,[["render",v]]);export{x as default};
